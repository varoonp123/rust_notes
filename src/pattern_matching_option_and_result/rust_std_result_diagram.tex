% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZAFgBoAGAXVJADcBDAGwFcYkQAlAHgBUB9AIykABAFFBAPhABfUuky58hFACZSK6nSat2-ATLkgM2PASLlSxTQxZtEnXnzVjJB+SaVE1ANmva7IPwqbkYKpsrI3up+tuzi+rLuimYoUb40Njr24sGJoR4pyAAcljFZDnoiOVJ5xskRZEVlAdxBVU41mjBQAObwRKAAZgBOEAC2SEIgOBBIAMwZ-uyDfDghI+NIAKw0M0hkWrH2K6LroxOIFtOziGogAEYwYFBIALRzV5kBAHRj9GgAChWPAAlCAaIx6I9GAAFMKeexYMDYWBnTaIKZ7W6LI4gHp8YACFTSNEXK5Yu6PZ5vYgAThx5W+9GeAB0WasABZPAH4wnEsEQqEwWHwlIgYZYHoctZ5DYXADsuxuC0OjJgAA80DAAMY4AEAcn1YzgPUNApAkOhcIKyhASJRbBoVJeiHe5Fl5yQiuu2wZPw1Wt1bL4MGGwwNRpNZvBFqFIpt7HtWFRTqeLo+HvR5OVfvYfzQwYg4ZwThEwLBmbJSqQUQeaf29NVPyLweFcBgPIJKgE0grhjlXuriBVX3Y32YYAA7sN-gDzc6kFdLcLrfVE8jk2xK4OfYgdnXqa6Prn7OOpzOC+zQ+Hzcv42vERvUdvEAcsbXR-Zed2SS-szXU0PY8mzHfNWzDIE+FEW841XcJ1wdUlfV3EclnsDknCQxBvSxVDcTPad-kLYZW0YdsAQwvlexjBdh3dShpCAA
\begin{tikzcd}
              &  &                                                &  & {R<T_1, E_1>} \arrow[lllldddd, ".map(f_T)" description, bend right] \arrow[lllldddd, ".and\_then(g_{12})"', bend right=49] \arrow[lldddddd, "{map\_or(t_2, f_T)}"] \arrow[rrrrdddd, ".or\_else(g_{21})", bend left=49] \arrow[rrrrdddd, ".map\_err(f_E)" description, bend left]      &  &                                             &  &               \\
              &  &                                                &  &                                                                                                                                                                                                                                                                                       &  &                                             &  &               \\
              &  & T_1 \arrow[dddd, "f_t"] \arrow[lldd, "g_{12}"] &  &                                                                                                                                                                                                                                                                                       &  & E_1 \arrow[rrdd, "g_{21}"]                  &  &               \\
              &  &                                                &  &                                                                                                                                                                                                                                                                                       &  &                                             &  &               \\
{R<T_2, E_1>} &  &                                                &  &                                                                                                                                                                                                                                                                                       &  &                                             &  & {R<T_1, E_2>} \\
              &  &                                                &  &                                                                                                                                                                                                                                                                                       &  &                                             &  &               \\
              &  & T_2                                            &  &                                                                                                                                                                                                                                                                                       &  & E_2 \arrow[uuuu, "f_E"] \arrow[llll, "h_2"] &  &               \\
              &  &                                                &  &                                                                                                                                                                                                                                                                                       &  &                                             &  &               \\
              &  &                                                &  & {R<T_2, E_2>} \arrow[lluu, ".expect(''msg'')" description, bend right] \arrow[rruu, ".expect\_err(''msg'')" description, bend left] \arrow[lluu, ".unwrap()" description] \arrow[rruu, ".unwrap\_err()" description, bend right] \arrow[lluu, ".unwrap\_or\_else(h_{12})", bend left] &  &                                             &  &              
\end{tikzcd}
