% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRABUQBfU9TXfIRQAmclVqMWbAOrdeIDNjwEiZYePrNWiEAHk0ysAB52APjl8lgoqPXVNUnfsNHp5npYEqUAFjH3JbRAALQsFfkMiPzsJLTZnQSNg93EYKABzeCJQADMAJwgAWyQyEBwIJFFYxxAAZSLWagAjGDAoJABmUoY6FoYABQjrHQYYHJww-KKS6nKkAEYAuJ0cyYLixFK5xA7qHr7Bq28QPKx0gAsJpZqcgH0AfjXpxCrt3ZAWtpmQfZgBoeOpwuV2qQQAdHQ2gAdKG3HDnVoACju9wAlE8Nq8Kptmq12jtSg5wUwwAB3PJ0NAw24QPLU2A5OhMBg4RHojwgKYbd5vPYQCBoVSkRkMOAwcS-f5HIQnM6XEDXcGQqCI0kPdnyLmdWbYvygthgwqU6m0xEAL1IAAJ0hrcusFjqkHqiWx0hikABWR2IPWSw5eGVA+W4r6IAC0XUVBpgAA80DAAMasgDkycK8DgdEyqdtnPtiC9ZV1e16f39kR0WDA2FgCo+eM6hMCBpJ5MpbPdL29VQY-MFKDIIrFEtLUoDbCDIJdOjBppw6s7he2hd7AqFQ-FJYOAMDcqnzZnMdNZoXHK1O29i31M9bFKpsNNpPRW7LO7YVZrrDP+Z52ML05AQ12xtOs-TfHRJ24CguCAA
\begin{tikzcd}
T \arrow[dd, "Some", bend left] \arrow[rr, "f"] \arrow[rrdd, "f_?"']                                                                              &  & W \arrow[rr, "g"]                                                                                                                                                    &  & Z                                                                                                                                                                  \\
                                                                                                                                                  &  &                                                                                                                                                                      &  &                                                                                                                                                                    \\
Option<T> \arrow[rr, ".and\_then(f_?)"'] \arrow[uu, ".unwrap\_or\_default()", bend left] \arrow[".or(t_?)"', loop, distance=2em, in=305, out=235] &  & Option<W> \arrow[".and(w_?)"', loop, distance=2em, in=305, out=235] \arrow[rruu, "{.map\_or(z, g)}"] \arrow[uu, ".unwrap\_or(w)" description] \arrow[rr, ".map(g)"'] &  & Option<Z> \arrow[uu, ".expect(''message'')"', bend right] \arrow[uu, ".unwrap()" description, bend left] \arrow[".xor(z_?)"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
